(function(){
/*
@license jHTML2CANVAS
Author : Gojecks Joseph
License : GNU-2
Version 0.1.0
*/
function browser(){}function getDeviceRatio(){var a=(new browser).createVirtualElement(document.body,"div",{height:"1in",left:"-100%",width:"1in"}),b=window.devicePixelRatio||1,c={dpi_x:a.offsetWidth*b,dpi_y:a.offsetHeight*b};return document.body.removeChild(a),c}function canvasDrawing(a,b){var c={width:500,height:500,id:"_canvas_"+ +new Date},d=this.helpers.extend({},a||{},c),e=new publicApi;return e.options=d,e.canvas=this.generateCanvas(d),e.ctx=e.canvas.getContext("2d"),b&&b.appendChild(e.canvas),e}function publicApi(){this.colors=["black","green","blue","red","orange","white","gray","purple"],this.size=[2,4,6,8,10,12,14,16,18,20],this.stack=[],this._events={}}function eraseCanvas(){this.ctx.clearRect(0,0,this.options.width,this.options.height)}function draw(a,b,c,d,e,f,g){this.ctx.beginPath(),this.ctx.moveTo(a,b),this.ctx.lineTo(c,d),this.ctx.strokeStyle=e,this.ctx.lineWidth=f,this.ctx.stroke(),this.ctx.closePath(),g&&this.stack.push({arg:[a,b,c,d,e,f,!1],event:"draw"}),this.trigger("interact.send")}function pencilOnBoard(a,b,c,d){this.ctx.beginPath(),this.ctx.fillStyle=a,this.ctx.fillRect(b,c,2,2),this.ctx.closePath(),d&&this.stack.push({event:"pencilOnBoard",arg:[a,b,c]}),this.trigger("interact.send")}function getMouseEvent(a){return{clientX:a.clientX||(a.targetTouches[0]||{}).clientX,clientY:a.clientY||(a.targetTouches[0]||{}).clientY}}function findxy(a){var b=this.canvas,c=(this.ctx,getMouseEvent(a));switch(a.type){case"mousedown":case"touchstart":prevX=currX,prevY=currY,currX=c.clientX-b.offsetLeft,currY=c.clientY-b.offsetTop,flag=!0,dot_flag=!0,dot_flag&&(pencilOnBoard.apply(this,[canvasDrawingX,currX,currY,!0]),dot_flag=!1);break;case"mouseout":case"mouseup":case"touchend":flag=!1;break;case"mousemove":case"touchmove":flag&&(prevX=currX,prevY=currY,currX=c.clientX-b.offsetLeft,currY=c.clientY-b.offsetTop,draw.apply(this,[prevX,prevY,currX,currY,canvasDrawingX,canvasDrawingY,!0]))}}function $on(a,b){return this._events[a]=b,this}function trigger(a,b){return this._events[a]&&this._events[a].call(this._events[a],b),this}function interaction(a){this._options=a.options,this._parent=new jHTML2Canvas,this._events={},self=this,_childFrames={},this.ajax={post:{method:"POST"},get:{method:"GET"},timer:500},this.helpers={draw:draw,pencilOnBoard:pencilOnBoard,clear:eraseCanvas},a.$on("interact.send",function(){self.sendEvent("interaction.stack.received",{user:a.options.id,stack:a.stack.concat()}),a.stack=[]}),this.socketEnabled=!1,this.socket={}}function jHTML2Canvas(a){this.canvasCreated=[],this.options=defaultConfiguration,this.pages=a||{},this.browser=new browser}function getPages(a){var b,c={};return"string"==typeof a?b=document.querySelectorAll(a):"[object NodeList]"===toString.call(a)?b=a:c=a,b&&foreach(b,function(a,b){c[b]=a}),c}function http(a){var b=new jPromise;if("object"==typeof a){var c,d=new XMLHttpRequest;switch(d.open(a.method,a.url,a.async||!0),d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status||0==d.status){var e=d.getResponseHeader("content-type");c=/json/.test(a.dataType||e)?JSON.parse(d.responseText):/xml/.test(a.dataType||e)?parseXML(d.responseText):d.responseText,b.resolve(c)}else b.reject()},a.method.toLowerCase()){case"post":a.data&&"object"==typeof a.data&&(a.data=JSON.stringify(a.data))}d.send(a.data)}return b}function jPromise(){this.queue=[],this._done=[],this._fail=[],this.$$state={pending:!0,value:null,resolved:null}}function getElementCss(a){var b=document.styleSheets,c={};for(var d in b){var e=b[d].rules||b[d].cssRules;for(var f in e)eleIs(a,e[f].selectorText,a.parentNode)&&(c=extend(c,css2Object(e[f].style),extractStyle(a)))}return c}function foreach(a,b){for(var c=a.length,d=0;c>d;)(b||function(){})(a[d],d),d++}function extractAttr(a,b){var c={};if("object"!=typeof b||!a)throw new error("extractAttr : requires list of attr to extract");return b.forEach(function(b){c[b]=a.getAttribute(b)}),c}function css2Object(a){var b={};if(!a)return b;if(a instanceof CSSStyleDeclaration)for(var c=a.length;c--;)b[a[c].toLowerCase()]=a[a[c]];else if("string"==typeof a){a=a.split("; ");for(var d in a){var e=a[d].split(": ");b[e[0].toLowerCase()]=e[1]}}return b}function extractStyle(a){var b={};if(a.nodeType===document.ELEMENT_NODE){var c=a.getAttribute("style");if(c){var d=c.split(";");for(var e in d){var f=d[e].split(":");b[f[0]]=f[1]}}}return b}function extend(a,b,c){if(c)return extend(extend(a,b),c);for(var d in b)a.hasOwnProperty(d)||(a[d]=b[d]);return a}function writeElementStyle(a,b){if(a&&b)for(var c in b)a.style[c]=b[c]}function isCheckAble(a){return["radio","checkbox"].indexOf(a.getAttribute("type"))>-1}function transverseDom(a,b){var c=a.ownerDocument.createTreeWalker(a,NodeFilter.SHOW_ELEMENT),d=c.nextNode();do if(d){var e=d.tagName;switch(e.toLowerCase()){case"img":var f={height:d.clientHeight,width:d.clientWidth},g=jHTML2Canvas.prototype.generateCanvas(f),h=g.getContext("2d");h.drawImage(d,0,0),d.src=g.toDataURL();break;case"textarea":d.textContent=d.value;break;case"input":isCheckAble(d)?d.checked?d.setAttribute("checked",""):d.removeAttribute("checked"):d.setAttribute("value",d.value)}(b||function(){})(d,getElementCss(d))}while(d=c.nextNode())}function eleIs(a,b,c){var d=(c||document).querySelectorAll(b),e=!1;return foreach(d,function(b){b===a&&(e=!0)}),e}function prepareDomCloning(a){function b(){document.body.removeChild(d)}var c=a.cloneNode(!0),d=(new browser).createVirtualElement(document.body,"div");return d.appendChild(c),{content:c,destroy:b,width:c.clientWidth,height:c.clientHeight}}function pageManager(a,b){this.pages={},this.builder=new jHTML2Canvas,this.styleSheet=[];var c="A4",d=96,e={1:{top:96,left:72,right:72,bottom:10},_:{top:72,left:72,right:72,bottom:10}};this.paper=function(a){return f[a]&&(a=a),this},this.getPaperSize=function(a){var b=browser.prototype.support.deviceRatio();return f[c][b.dpi_x]?f[c][b.dpi_x]:f[c][a||d]},this.extendPaperAspect=function(a,b,c){return f[a]||(f[a]={}),f[a][b]=c,this},this.dpiFallback=function(a){return f[c][a]&&(d=a),this},this.paperMargin=function(a){return"object"==typeof a&&(e=extend({},e,a)),this},this.getPaperMargin=function(a){return a?e[a]||e._:e};var f={};f.A4={72:{width:595,height:842},96:{width:794,height:1123},150:{width:1240,height:1754},300:{width:2480,height:3508}},f.A5={72:{width:420,height:595},96:{width:595,height:794},150:{width:874,height:1240},300:{width:1748,height:2480}},f.A1={72:{width:1684,height:2384},96:{width:2245,height:3179},150:{width:3508,height:4967},300:{width:7016,height:9933}},f.A2={72:{width:1191,height:1684},96:{width:1587,height:2245},150:{width:2480,height:3508},300:{width:4960,height:7016}},f.A3={72:{width:842,height:1191},96:{width:1123,height:1587},150:{width:1754,height:2480},300:{width:3508,height:4960}},a&&this.loadTemplate(a,b)}function bindListeners(){this.afterLoadevents.forEach(function(a){var b=document.querySelectorAll("["+a+"]");if(b.length)for(var c=0;c<b.length;){var d=b[c].getAttribute(a),e=a.split("-")[2];b[c].addEventListener(e,pageManager.prototype.eventHandler(d),!1),c++}})}function templateReplacer(a,b){return a.replace(/\{\{(.*?)\}\}/g,function(a,c){return b[c]||a})}function jPDF(a){return new publicApis(new privatePDFApis(extend({},defaultOptions,a||{})))}function publicApis(a){this.addPage=function(){return a._addPage(),this},this.addText=function(b,c,d,e){e&&this.setFont(e),pageFontSize===fontSize&&pageFont===font||(pageFontSize=fontSize,pageFont=font);var f=a.sprintf("BT %.2f %.2f Td (%s) Tj ET",b*k,(pageHeight-c)*k,a.pdfEscape(d));return a.out("BT "+(fonts[font]?fonts[font]:"/F0")+" "+parseInt(fontSize,10)+".00 Tf ET"),a.out(f),this},this.drawRect=function(b,c,d,e,f){var g="S";return"F"===f?g="f":"FD"!==f&&"DF"!==f||(g="B"),a.out(a.sprintf("%.2f %.2f %.2f %.2f re %s",b*k,(pageHeight-c)*k,d*k,-e*k,g)),this},this.drawLine=function(){return a.drawLine.apply(a,arguments),this},this.output=function(b,c){return a.endDocument(),void 0==b?content_length:"datauri"==b?"data:application/pdf;filename="+c.fileName+";base64,"+btoa(content_length):void 0},this.setFontSize=function(a){fontSize=a},this.setFont=function(a){a in fonts||(fonts[a]="/F"+fontIndex++),font=a},this.setPageProperties=function(a){documentProperties=a}}function setUpPageUnit(){switch(unit){case"pt":k=1;break;case"mm":k=72/25.4000508;break;case"cm":k=72/2.54000508;break;case"in":k=72;break;case"px":k=96/72;break;case"pc":k=12;break;case"em":k=12;break;case"ex":k=6;break;default:throw"Invalid unit: "+unit}}function addToFontDictionary(a,b,c){fontmap.hasOwnProperty(b)||(fontmap[b]={}),fontmap[b][c]=a}function addFont(a,b,c,d){var e="F"+(Object.keys(fonts).length+1).toString(10);fonts[e]={id:e,PostScriptName:a,fontName:b,fontStyle:c,encoding:d,metadata:{}};return addToFontDictionary(e,b,c),e}function addFonts(){for(var a="helvetica",b="times",c="courier",d="normal",e="bold",f="italic",g="bolditalic",h="StandardEncoding",i=[["Helvetica",a,d],["Helvetica-Bold",a,e],["Helvetica-Oblique",a,f],["Helvetica-BoldOblique",a,g],["Courier",c,d],["Courier-Bold",c,e],["Courier-Oblique",c,f],["Courier-BoldOblique",c,g],["Times-Roman",b,d],["Times-Bold",b,e],["Times-Italic",b,f],["Times-BoldItalic",b,g]],j=0,k=i.length;j<k;j++){var l=addFont(i[j][0],i[j][1],i[j][2],h),m=i[j][0].split("-");addToFontDictionary(l,m[0],m[1]||"")}}function privatePDFApis(a){setUpPageUnit(),addFonts(),orientation=(""+(a.orientation||"P")).toLowerCase(),unit=a.unit||"mm",format=a.format||"a4",this._addPage(format,orientation)}function jSVG(a,b){this.options=defaultConfiguration,this.svgData=this.getSvgContent(a),this.svg=new Blob([this.svgData],{type:"image/svg+xml;charset=utf-8"}),b&&this.createDummySvg(this.svgData),this.blobURL=this.options.domUrl.createObjectURL(this.svg),this.svgBase64Data=this.toBase64()}browser.prototype.createVirtualElement=function(a,b,c){var d=document.createElement(b);if(d.style.zIndex="-10000",d.style.position="absolute",d.style.top="-100000",d.style.visibility="hidden",c)for(var b in c)d.style[b]=c[b];return a.appendChild(d),d},browser.prototype.support={testSVG:function(){var a=new Image,b=document.createElement("canvas"),c=b.getContext("2d");a.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{c.drawImage(a,0,0),b.toDataURL()}catch(a){return!1}return!0},testCORS:function(){return"undefined"!=typeof(new Image).crossOrigin},deviceRatio:getDeviceRatio},browser.prototype.getPageStyleSheets=function(){for(var a=document.styleSheets,b=[],c=a.length,d=0;c>d;){var e=a[d].rules;if(e.length)for(var f=0;e.length>f;)!b.indexOf(e[f].cssText)>-1&&b.push(e[f].cssText),f++;d++}return b.join("")},publicApi.prototype.addColor=function(a){return!this.colors.indexOf(a)>-1&&this.colors.push(a),this},publicApi.prototype.setPenSize=function(a){canvasDrawingY="default"===a?2:parseInt(a)},publicApi.prototype.setColor=function(a){return(this.colors.indexOf(a)>-1||"white"===a)&&(canvasDrawingX=a,canvasDrawingY="white"===a?14:2),this},publicApi.prototype.reScale=function(a){this.options.id==a.user&&(this.canvas.width=a.stack.width,this.canvas.height=a.stack.height)},publicApi.prototype.erase=function(){eraseCanvas.call(this),this.stack.push({event:"clear"}),this.trigger("interact.send"),this.stack=[]},publicApi.prototype.init=function(a){var b=this;return this.addEventListener(["mousemove","mousedown","mouseup","mouseout","touchstart","touchmove","touchend"],function(a){findxy.call(b,a)},!1),(a||function(){})(),this},publicApi.prototype.addStyle=function(a){if(a)for(var b in a)this.canvas.style[b]=a[b];return this},publicApi.prototype.addEventListener=function(a,b){var c=this;return"object"==typeof a?a.forEach(function(a){c.canvas.addEventListener(a,b)}):c.canvas.addEventListener(a,b),this},publicApi.prototype.getDataURL=function(a){var b=this.canvas.toDataURL();(a||function(){})(b)},publicApi.prototype.interact=function(){return new interaction(this)},publicApi.prototype.$on=$on,publicApi.prototype.trigger=trigger,interaction.prototype.connect=function(){return this.sendEvent("connect.child",{user:this._options.id,stack:this._options}),this},interaction.prototype.createChildFrame=function(a,b){return _childFrames[a.user]=(new jHTML2Canvas).drawing(a.stack,b),_childFrames[a.user]},interaction.prototype.destroyFrame=function(a){delete _childFrames[a]},interaction.prototype.sendEvent=function(a,b){var c=this.ajax.post;c.data={type:a,payload:b},this.socketEnabled?this.socket.emit("events.received",c.data):this._parent.helpers.http(c)},interaction.prototype.watch=function(){var a=this;return this.socketEnabled||(console.log("-- starting web :http long poll---"),setInterval(function(){a.getEvents()},this.ajax.timer)),a.getEvents(),this},interaction.prototype.getEvents=function(){var a=this.ajax.get,b=this,c=function(a){b.trigger(a.type,a.payload)};this.socketEnabled?(console.log("-- starting web socket:events.received---"),this.socket.on("events.received",c)):this._parent.helpers.http(a).then(c)},interaction.prototype.draw=function(a){var b=_childFrames[a.user],c=this;b&&a.stack.forEach(function(a){c.helpers[a.event].apply(b,a.arg)})},interaction.prototype.disconnect=function(){return this},interaction.prototype.$on=$on,interaction.prototype.trigger=trigger;var defaultConfiguration={paperHeight:1319,paperWidth:1019,domUrl:window.URL||window.webkitURL||window},flag=!1,prevX=0,currX=0,prevY=0,currY=0,dot_flag=!1,canvasDrawingX="black",canvasDrawingY=2;jHTML2Canvas.prototype.captureScreenToCanvas=function(a,b,c){var d=b.getContext("2d"),e=new jSVG(a,!0),f=b.clientHeight,g=b.clientWidth,h=this.createImage({width:g,height:f},function(){d.drawImage(this,0,0),e.close()});return function(a){h.src(e.svgBase64Data),(a||function(){})()}},jHTML2Canvas.prototype.generateCanvas=function(a){var b=document.createElement("canvas");for(var c in a)b.setAttribute(c,a[c]);return b},jHTML2Canvas.prototype.captureScreen=function(a){var b=new jSVG(a,!0),c=this.convertSVG2Canvas(b.getDummySVG(),function(){b.close(),b=null});return{appendTo:function(a){return a&&c.appendTo(a),this},getBase64:function(){return c.getBase64.apply(c.getBase64,arguments)}}},jHTML2Canvas.prototype.setPageData=function(a,b){return b&&(this.pages[a]=b),this},jHTML2Canvas.prototype.drawPagesCanvas=function(a,b,c){function d(a){return function(b){f[a]=b,i++,i===Object.keys(h).length&&g.resolve(f)}}var e=this,f={},g=new jPromise,h=getPages(this.pages),i=0;for(var j in h){var k=h[j];"[object Array]"===toString.call(k)&&(k=k.join(""));var l=e.captureScreen(k).appendTo(a);l.getBase64(b,c).done(d(j))}return g},jHTML2Canvas.prototype.drawPagesImage=function(a,b,c){var d=this,e={},f=getPages(this.pages),g=new jPromise,h=0;for(var i in f){h++;var j=f[i];"[object Array]"===toString.call(j)&&(j=j.join(""));var k=this.createImage({width:d.options.paperWidth,height:d.options.paperHeight}),l=new jSVG(j,!0);l.serializeSVG(l.getDummySVG());k.src(l.svgBase64Data),e[i]=l.toBase64(b,c),a&&a.appendChild(k.get()),l.close(),l=null,h===Object.keys(f).length&&g.resolve(e)}return g},jHTML2Canvas.prototype.createImage=function(a,b){var c=new Image;if(a)for(var d in a)c.setAttribute(d,a[d]);return this.browser.support.testCORS()&&(c.crossOrigin="Anonymous"),c.onload=b||function(){},{src:function(a){return c.src=a,this},get:function(){return c},onComplete:function(a){if(c.complete||void 0===c.complete)return(a||function(){})(c)}}},jHTML2Canvas.prototype.helpers={getElementCss:getElementCss,writeElementStyle:writeElementStyle,extend:extend,extractStyle:extractStyle,transverseDom:transverseDom,is:eleIs,promise:jPromise,forEach:foreach,http:http,noop:function(){}},jPromise.prototype={then:function(a,b){return this._done.push(a),this._fail.push(b),this.$$state.pending||this[this.$$state.resolved].call(this,this.$$state.value),this},catch:function(a){return this._fail.push(a),this},done:function(a){return this._done.push(a),this},fail:function(a){return this._fail.push(a),this},resolve:function(){for(var a=this._done.length;a--;){var b=this._done.shift();b.apply(b,arguments)}this.$$state.pending=!1,this.$$state.resolved="resolve",this.$$state.value=arguments},reject:function(){for(var a=this._fail.length;a--;){var b=this._fail.shift();b.apply(b,arguments)}this.$$state.pending=!1,this.$$state.resolved="reject",this.$$state.value=arguments}},jHTML2Canvas.prototype.calculatePaperSize=function(a,b){for(var c=Math.ceil(a.clientHeight/this.paperHeight),d=0;d<c;d++)this.canvasCreated.push(this.generateCanvas(idtext+"_"+d));return this},jHTML2Canvas.prototype.pageManager=pageManager,jHTML2Canvas.prototype.drawing=canvasDrawing,jHTML2Canvas.prototype.convertSVG2Canvas=function(a,b){if(!a)throw new error("convertSVG2Canvas : Requires SVG element.");var c=new jSVG("").serializeSVG(a),d=new jPromise,e=extractAttr(a,["width","height"]),f=this,g=f.generateCanvas(e);return this.createImage(e,function(){try{var a=g.getContext("2d");a.fillStyle="#fff",a.fillRect(0,0,e.width,e.height),a.drawImage(this,0,0),d.resolve(g,this)}finally{c.close(),c=null,b&&b()}}).src(c.svgBase64Data),{appendTo:function(a){return a.appendChild(g),this},getBase64:function(){var a=null,b=new jPromise,c=arguments;return d.done(function(d,e){try{a=d.toDataURL.apply(d,c)}catch(a){console.log("toDataURL: Failed to convert canvas to base64 image data")}finally{b[a?"resolve":"reject"](a)}}),b},getCanvas:function(){return g}}},pageManager.prototype.createElement=function(a,b){var c=document.createElement(a.element);if(b=b||{},a.attr)for(var d in a.attr)c.setAttribute(d,a.attr[d]);if(a.text&&(c.innerHTML=templateReplacer(a.text,b)),a.eventListener)for(var e in a.eventListener)c.setAttribute("data-event-"+e,a.eventListener[e]),this.events.afterLoadevents.push("data-event-"+e);if(a.children)for(var f in a.children)c.appendChild(pageManager.prototype.createElement(a.children[f],b));return c},pageManager.prototype.eventHandler=function(a){return this.events.handlers[a]||function(){}},pageManager.prototype.events={handlers:{},afterLoadevents:[],bindListeners:bindListeners},pageManager.prototype.loadTemplate=function(a,b){if(a){var c=new XMLHttpRequest;c.open("GET",a,!1),c.onreadystatechange=function(){if(4===c.readyState&&(200===c.status||0==c.status)){var a,d=c.responseText;try{a=JSON.parse(d)}catch(a){throw new Error("Inavlid Json file received")}finally{a&&(b||function(){})(a)}}},c.send(null)}},pageManager.prototype.setPage=function(a){function b(a){function b(b){return function(d,e){return a[b]=templateReplacer(d,e),c}}var c=this;for(var d in a)this["set"+d]=b(d)}return this.pages[a]||(this.pages[a]={header:null,footer:null,body:null}),new b(this.pages[a])},pageManager.prototype.addStyle=function(a){return a&&this.styleSheet.push(a),this},pageManager.prototype.buildPages=function(a,b){function c(a,b){return"function"==typeof a?a.apply(a,[b]):a}function d(a,b,c){var d=document.createElement("style");d.textContent=a,d.setAttribute("id","jPageBuilder_"+c),d.setAttribute("type","text/css"),b.appendChild(d)}function e(b,e){var g=document.createElement("div"),h="",i=f.getPaperMargin(b);for(var j in i)g.style["padding-"+j]=i[j]+"px";g.setAttribute("id","jPageBuilder_"+b);var k=f.getPaperSize();for(var l in k)g.style[l]=k[l]+"px";var m=["header","body","footer"];for(var n in m)e[m[n]]&&(h+=c(e[m[n]],k));return h&&("string"==typeof h?g.innerHTML=h:g.appendChild(h)),function(){f.styleSheet.length&&f.styleSheet.forEach(function(a,b){d(a,g,b)}),f.builder.setPageData(b,g),a&&a.appendChild(g)}}var f=this,g=[];for(var h in this.pages)g.push(e(h,this.pages[h]));var i=0;return g.forEach(function(a){i++,a(),g.length===i&&b&&b.apply(b,[g.length])}),g=[],this};var pdfVersion="1.3",pageFormats={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]},textColor="0 g",page=0,objectNumber=2,pages=new Array,offsets=new Array,lineWidth=.200025,pageWidth,pageHeight,k,unit="mm",documentProperties={},fontSize=16,pageFontSize=16,font="Helvetica",pageFont=font,fonts={},fontmap={},fontIndex=0,fontsNumber={},_pagedim={},_pagesContext={},onPageBegin=!1,content_length="",zoomMode,layoutMode,pageMode,orientation,defaultOptions={orientation:"P",unit:"mm",format:"a4"};privatePDFApis.prototype.f2=function(a){return a.toFixed(2)},privatePDFApis.prototype.f3=function(a){return a.toFixed(3)},privatePDFApis.prototype.padd2=function(a){return("0"+parseInt(a)).slice(-2)},privatePDFApis.prototype.newObject=function(){return objectNumber++,offsets[objectNumber]=content_length,this.out(objectNumber+" 0 obj"),objectNumber},privatePDFApis.prototype.newAdditionalObject=function(){var a=2*pages.length+1;a+=additionalObjects.length;var b={objId:a,content:""};return additionalObjects.push(b),b},privatePDFApis.prototype.newObjectDeferred=function(){return objectNumber++,offsets[objectNumber]=function(){return content_length},objectNumber},privatePDFApis.prototype.newObjectDeferredBegin=function(a){offsets[a]=content_length},privatePDFApis.prototype.putPages=function(){var a=pageWidth*k,b=pageHeight*k;for(n=1;n<=page;n++)this.newObject(),this.out("<</Type /Page"),this.out("/Parent 1 0 R"),this.out("/Resources 2 0 R"),this.out("/Contents "+(objectNumber+1)+" 0 R>>"),this.out("endobj"),p=pages[n],this.newObject(),this.out("<</Length "+p.length+">>"),this.putStream(p),this.out("endobj");offsets[1]=content_length.length,this.out("1 0 obj"),this.out("<</Type /Pages");var c="/Kids [";for(i=0;i<page;i++)c+=3+2*i+" 0 R ";this.out(c+"]"),this.out("/Count "+page),this.out(this.sprintf("/MediaBox [0 0 %.2f %.2f]",a,b)),this.out(">>"),this.out("endobj")},privatePDFApis.prototype.putStream=function(a){this.out("stream"),this.out(a),this.out("endstream")},privatePDFApis.prototype.putHeader=function(){this.out("%PDF-"+pdfVersion)},privatePDFApis.prototype.putResources=function(){var a;if(fontIndex)for(a in fonts)this.putFonts(a);else fonts[font]=0,this.putFonts(font);this.putImages(),offsets[2]=content_length.length,this.out("2 0 obj"),this.out("<<"),this.putResourceDictionary(),this.out(">>"),this.out("endobj")},privatePDFApis.prototype.putFonts=function(a){this.newObject(),fontsNumber[a]=objectNumber,this.out("<</Type /Font"),this.out("/BaseFont /"+a),this.out("/Subtype /Type1"),this.out("/Encoding /WinAnsiEncoding"),this.out(">>"),this.out("endobj")},privatePDFApis.prototype.putImages=function(){},privatePDFApis.prototype.drawLine=function(a,b,c,d,e,f){("undefined"==typeof e||e<0)&&(e=1),f="undefined"==typeof f?"[] 0 d":"dotted"===f?"[1 2] 1 d":"dashed"===f?"[4 2] 2 d":"[] 0 d";var g=this.sprintf("\n/LEP BMC \nq\n0 G\n%.2f w\n%s\n0 J\n1 0 0 1 0 0 cm\n%.2f %.2f m\n%.2f %.2f l\nS\nQ\nEMC\n",e,f,k*a,k*(pageHeight-b),k*c,k*(pageHeight-d));return this.out(g),this},privatePDFApis.prototype.putResourceDictionary=function(){var a;this.out("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),this.out("/Font <<"),console.log(fontsNumber,fonts);for(a in fontsNumber)this.out(fonts[a]+" "+fontsNumber[a]+" 0 R");this.out(">>"),this.out("/XObject <<"),this.putXobjectDict(),this.out(">>")},privatePDFApis.prototype.putXobjectDict=function(){},privatePDFApis.prototype.arrayPadd2=function(a){return"object"!=typeof a?"":a.filter(function(a){return privatePDFApis.prototype.padd2(a)}).join("")},privatePDFApis.prototype.putInfo=function(){this.out("/Producer (jPDF.js "+pdfVersion+")"),void 0!=documentProperties.title&&this.out("/Title ("+this.pdfEscape(documentProperties.title)+")"),void 0!=documentProperties.subject&&this.out("/Subject ("+this.pdfEscape(documentProperties.subject)+")"),void 0!=documentProperties.author&&this.out("/Author ("+this.pdfEscape(documentProperties.author)+")"),void 0!=documentProperties.keywords&&this.out("/Keywords ("+this.pdfEscape(documentProperties.keywords)+")"),void 0!=documentProperties.creator&&this.out("/Creator ("+this.pdfEscape(documentProperties.creator)+")");var a=new Date,b=this.arrayPadd2([a.getFullYear(),a.getMonth()+1,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()]);this.out("/CreationDate (D:"+b+")")},privatePDFApis.prototype.putCatalog=function(){switch(this.out("/Type /Catalog"),this.out("/Pages 1 0 R"),zoomMode||(zoomMode="fullwidth"),zoomMode){case"fullwidth":this.out("/OpenAction [3 0 R /FitH null]");break;case"fullheight":this.out("/OpenAction [3 0 R /FitV null]");break;case"fullpage":this.out("/OpenAction [3 0 R /Fit]");break;case"original":this.out("/OpenAction [3 0 R /XYZ null null 1]");break;default:var a=""+zoomMode;"%"===a.substr(a.length-1)&&(zoomMode=parseInt(zoomMode)/100),"number"==typeof zoomMode&&this.out("/OpenAction [3 0 R /XYZ null null "+this.f2(zoomMode)+"]")}switch(layoutMode||(layoutMode="continuous"),layoutMode.toLowerCase()){case"continuous":this.out("/PageLayout /OneColumn");break;case"single":this.out("/PageLayout /SinglePage");break;case"two":case"twoleft":this.out("/PageLayout /TwoColumnLeft");break;case"tworight":this.out("/PageLayout /TwoColumnRight")}pageMode&&this.out("/PageMode /"+pageMode)},privatePDFApis.prototype.putTrailer=function(){this.out("/Size "+(objectNumber+1)),this.out("/Root "+objectNumber+" 0 R"),this.out("/Info "+(objectNumber-1)+" 0 R")},privatePDFApis.prototype.endDocument=function(){onPageBegin=!1,this.putHeader(),this.putPages(),this.putResources(),this.newObject(),this.out("<<"),this.putInfo(),this.out(">>"),this.out("endobj"),this.newObject(),this.out("<<"),this.putCatalog(),this.out(">>"),this.out("endobj");var a=content_length.length;this.out("xref"),this.out("0 "+(objectNumber+1)),this.out("0000000000 65535 f ");for(var b=1;b<=objectNumber;b++)this.out(this.sprintf("%010d 00000 n ",offsets[b]));this.out("trailer"),this.out("<<"),this.putTrailer(),this.out(">>"),this.out("startxref"),this.out(a),this.out("%%EOF"),onPageBegin=!1},privatePDFApis.prototype.beginPage=function(a,b){var c="string"==typeof b&&b.toLowerCase();if("string"==typeof a){var d=a.toLowerCase();pageFormats.hasOwnProperty(d)&&(a=pageFormats[d][0]/k,b=pageFormats[d][1]/k)}if(Array.isArray(a)&&(b=a[1],a=a[0]),c){switch(c.substr(0,1)){case"l":b>a&&(c="s");break;case"p":a>b&&(c="s")}"s"===c&&(tmp=a,a=b,b=tmp)}onPageBegin=!0,pages[++page]=[],_pagedim[page]={width:Number(a)||pageWidth,height:Number(b)||pageHeight},_pagesContext[page]={},pages[page]="",pageHeight=_pagedim[page].height,pageWidth=_pagedim[page].width},privatePDFApis.prototype.out=function(a){onPageBegin?pages[page]+=a+"\n":content_length+=a+"\n"},privatePDFApis.prototype._addPage=function(){this.beginPage.apply(this,arguments),this.out(this.sprintf("%.2f w",lineWidth*k)),pageFontSize=fontSize,pageFont=font,this.out("BT "+fonts[font]+" "+parseInt(fontSize)+".00 Tf ET")},privatePDFApis.prototype.pdfEscape=function(a){return a.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},privatePDFApis.prototype.sprintf=function(){var a=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,b=arguments,c=0,d=b[c++],e=function(a,b,c,d){c||(c=" ");var e=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+e:e+a},f=function(a,b,c,d,f,g){var h=d-a.length;return h>0&&(a=c||!f?e(a,d,g,c):a.slice(0,b.length)+e("",h,"0",!0)+a.slice(b.length)),a},g=function(a,b,c,d,g,h,i){var j=a>>>0;return c=c&&j&&{2:"0b",8:"0",16:"0x"}[b]||"",a=c+e(j.toString(b),h||0,"0",!1),f(a,c,d,g,i)},h=function(a,b,c,d,e,g){return null!=d&&(a=a.slice(0,d)),f(a,"",b,c,e,g)},i=function(a,d,i,j,k,l,m){var n,o,p,q,r;if("%%"==a)return"%";for(var s=!1,t="",u=!1,v=!1,w=" ",x=i.length,y=0;i&&y<x;y++)switch(i.charAt(y)){case" ":t=" ";break;case"+":t="+";break;case"-":s=!0;break;case"'":w=i.charAt(y+1);break;case"0":u=!0;break;case"#":v=!0}if(j=j?"*"==j?+b[c++]:"*"==j.charAt(0)?+b[j.slice(1,-1)]:+j:0,j<0&&(j=-j,s=!0),!isFinite(j))throw new Error("sprintf: (minimum-)width must be finite");switch(l=l?"*"==l?+b[c++]:"*"==l.charAt(0)?+b[l.slice(1,-1)]:+l:"fFeE".indexOf(m)>-1?6:"d"==m?0:void 0,r=d?b[d.slice(0,-1)]:b[c++],m){case"s":return h(String(r),s,j,l,u,w);case"c":return h(String.fromCharCode(+r),s,j,l,u);case"b":return g(r,2,v,s,j,l,u);case"o":return g(r,8,v,s,j,l,u);case"x":return g(r,16,v,s,j,l,u);case"X":return g(r,16,v,s,j,l,u).toUpperCase();case"u":return g(r,10,v,s,j,l,u);case"i":case"d":return n=parseInt(+r),o=n<0?"-":t,r=o+e(String(Math.abs(n)),l,"0",!1),f(r,o,s,j,u);case"e":case"E":case"f":case"F":case"g":case"G":return n=+r,o=n<0?"-":t,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(m.toLowerCase())],q=["toString","toUpperCase"]["eEfFgG".indexOf(m)%2],r=o+Math.abs(n)[p](l),f(r,o,s,j,u)[q]();default:return a}};return d.replace(a,i)},jSVG.prototype.getBlobURL=function(){return this.blobURL},jSVG.prototype.revokeBlobURL=function(){this.options.domUrl.revokeObjectURL(this.blobUrl)},jSVG.prototype.createDummySvg=function(a){if(a){var b=(new browser).createVirtualElement(document.body,"div");b.innerHTML=a,this.destroyDummySVG=function(){document.body.removeChild(b)},this.getDummySVG=function(){return b.querySelector("svg")}}return this},jSVG.prototype.serializeSVG=function(a){return this.svgData=(new XMLSerializer).serializeToString(a),this.svg=new Blob([this.svgData],{type:"image/svg+xml;charset=utf-8"}),this.blobURL=this.options.domUrl.createObjectURL(this.svg),this.svgBase64Data=this.toBase64(),this},jSVG.prototype.getSvgContent=function(a){var b=this.options.paperWidth,c=this.options.paperHeight,d=document.createElement("div");if("string"!=typeof a){var e=prepareDomCloning(a);transverseDom(e.content,function(a,b){writeElementStyle(a,b)}),a=document.body===a?e.content.innerHTML:e.content.outerHTML,e.destroy(),b=e.width,c=e.height}return d.innerHTML=a,a=(new XMLSerializer).serializeToString(d),'<svg xmlns="http://www.w3.org/2000/svg" width="'+b+'" height="'+c+'"><foreignObject width="100%" height="100%">'+a+"</foreignObject></svg>"},jSVG.prototype.toBase64=function(){var a="data:image/svg+xml;base64,";return a+=btoa(unescape(encodeURIComponent(this.svgData)))},jSVG.prototype.close=function(){this.revokeBlobURL(this.blobURL),this.destroyDummySVG&&this.destroyDummySVG(),this.svgData=null,this.svgBase64Data=null};window.jHTML2Canvas = jHTML2Canvas; window.jPDF = jPDF; })();